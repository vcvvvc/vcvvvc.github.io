<!doctype html>
<html lang="zh-cn">
  <head>
    <title>Mysql_use // Vcvc Blog</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.83.1" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Vcvc" />
    
    <meta name="description" content="用文字记录经验。" />
    <meta name="keywords" content="Vcvc,Vcvc Blog,CPP,Open Source,Python,Linux" />
    <link rel="stylesheet" href="https://6923403.github.io/css/main.min.c2052924716d810662c2cc67f9223190e814e1923e41ea4b9647c5c71b6ce3b6.css" />
    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Mysql_use"/>
<meta name="twitter:description" content="创建数据库 CREATE DATABASE IF NOT EXISTS vctest DEFAULT CHARSET utf8 COLLATE utf8_general_ci; 2. CREATE DATABASE IF NOT EXISTS mytestdb;
删除数据库 drop database test1; 2. DROP DATABASE IF EXISTS mytestdb;
查看All DB show databases;
导入sql source test.sql
 select
use vctest select city, phone, country from `offices`; SELECT语句由以下列表中所述的几个子句组成：
语句中的SELECT和FROM语句是必须的，其他部分是可选的。
 SELECT之后是逗号分隔列或星号(*)的列表，表示要返回所有列。 FROM指定要查询数据的表或视图。 JOIN根据某些连接条件从其他表中获取数据。 WHERE过滤结果集中的行。 GROUP BY将一组行组合成小分组，并对每个小分组应用聚合函数。 HAVING过滤器基于GROUP BY子句定义的小分组。 ORDER BY指定用于排序的列的列表。 LIMIT限制返回行的数量。  即使WHERE子句出现在语句的末尾，但MySQL会首先使用WHERE子句中的表达式来选择匹配的行。
SELECT lastname, firstname, jobtitle FROM employees WHERE jobtitle = &#39;Sales Rep&#39;;  INSERT 创建表"/>

    <meta property="og:title" content="Mysql_use" />
<meta property="og:description" content="创建数据库 CREATE DATABASE IF NOT EXISTS vctest DEFAULT CHARSET utf8 COLLATE utf8_general_ci; 2. CREATE DATABASE IF NOT EXISTS mytestdb;
删除数据库 drop database test1; 2. DROP DATABASE IF EXISTS mytestdb;
查看All DB show databases;
导入sql source test.sql
 select
use vctest select city, phone, country from `offices`; SELECT语句由以下列表中所述的几个子句组成：
语句中的SELECT和FROM语句是必须的，其他部分是可选的。
 SELECT之后是逗号分隔列或星号(*)的列表，表示要返回所有列。 FROM指定要查询数据的表或视图。 JOIN根据某些连接条件从其他表中获取数据。 WHERE过滤结果集中的行。 GROUP BY将一组行组合成小分组，并对每个小分组应用聚合函数。 HAVING过滤器基于GROUP BY子句定义的小分组。 ORDER BY指定用于排序的列的列表。 LIMIT限制返回行的数量。  即使WHERE子句出现在语句的末尾，但MySQL会首先使用WHERE子句中的表达式来选择匹配的行。
SELECT lastname, firstname, jobtitle FROM employees WHERE jobtitle = &#39;Sales Rep&#39;;  INSERT 创建表" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://6923403.github.io/post/mysqluse/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-09-19T12:08:34&#43;08:00" />
<meta property="article:modified_time" content="2020-09-19T12:08:34&#43;08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://6923403.github.io"><img class="app-header-avatar" src="/avatar.jpg" alt="Vcvc" /></a>
      <h1>Vcvc Blog</h1>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             - 
          
          <a class="app-header-menu-item" href="/about/">About</a>
      </nav>
      <p> Amateur Financer.</p>
      <div class="app-header-social">
        
          <a href="https://github.com/6923403" target="_blank" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://twitter.com/vcvckw" target="_blank" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>Twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg>
          </a>
        
          <a href="mailto:vcvckw@gmail.com" target="_blank" rel="noreferrer noopener">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-mail">
  <title>mail</title>
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline>
</svg>
          </a>
        
        
        <a href="/vcvc/index.html" target="_blank">
          <img  border="0" src="/vcvc/arrow.png" alt="Home" width="24" height="24"></a>






        <script src="https://unpkg.com/lunr/lunr.js"></script>
        var documents = [{
        "name": "Lunr",
        "text": "Like Solr, but much smaller, and not as bright."
        }, {
        "name": "React",
        "text": "A JavaScript library for building user interfaces."
        }, {
        "name": "Lodash",
        "text": "A modern JavaScript utility library delivering modularity, performance & extras."
        }]
      </div>-->
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Mysql_use</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Sep 19, 2020
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://6923403.github.io/tags/mysql/">Mysql</a>
              <a class="tag" href="https://6923403.github.io/tags/linux/">Linux</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <p><strong>创建数据库</strong>
<code>CREATE DATABASE IF NOT EXISTS vctest DEFAULT CHARSET utf8 COLLATE utf8_general_ci;</code>
<code>2. CREATE DATABASE IF NOT EXISTS mytestdb;</code></p>
<p><strong>删除数据库</strong>
<code>drop database test1;</code>
<code>2. DROP DATABASE IF EXISTS mytestdb;</code></p>
<p><strong>查看All DB</strong>
<code>show databases;</code></p>
<p><strong>导入sql</strong>
<code>source test.sql</code></p>
<hr>
<p><strong>select</strong></p>
<pre><code>use vctest
select city, phone, country from `offices`;
</code></pre><p><strong>SELECT语句由以下列表中所述的几个子句组成：</strong></p>
<p><strong>语句中的SELECT和FROM语句是必须的，其他部分是可选的。</strong></p>
<ul>
<li>SELECT之后是逗号分隔列或星号(*)的列表，表示要返回所有列。</li>
<li>FROM指定要查询数据的表或视图。</li>
<li>JOIN根据某些连接条件从其他表中获取数据。</li>
<li>WHERE过滤结果集中的行。</li>
<li>GROUP BY将一组行组合成小分组，并对每个小分组应用聚合函数。</li>
<li>HAVING过滤器基于GROUP BY子句定义的小分组。</li>
<li>ORDER BY指定用于排序的列的列表。</li>
<li>LIMIT限制返回行的数量。</li>
</ul>
<p><strong>即使WHERE子句出现在语句的末尾，但MySQL会首先使用WHERE子句中的表达式来选择匹配的行。</strong></p>
<pre><code>SELECT
    lastname, firstname, jobtitle
FROM
    employees
WHERE
    jobtitle = 'Sales Rep';
</code></pre><hr>
<p><strong>INSERT 创建表</strong></p>
<pre><code>CREATE TABLE [IF NOT EXISTS] table_name(
        column_list
) engine=table_type;

CREATE TABLE IF NOT EXISTS user (
    uid INT(11) AUTO_INCREMENT, 
    username VARCHAR(45) NOT NULL, 
    registration_time DATE DEFAULT NULL, 
    PRIMARY KEY(uid) 
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
</code></pre><ul>
<li>首先，指定要在CREATE TABLE子句之后创建的表的名称。表名在数据库中必须是唯一的。 IF NOT EXISTS是语句的可选部分，允许您检查正在创建的表是否已存在于数据库中。 如果是这种情况，MySQL将忽略整个语句，不会创建任何新的表。 强烈建议在每个CREATE TABLE语句中使用IF NOT EXISTS来防止创建已存在的新表而产生错误。</li>
<li>其次，在column_list部分指定表的列表。字段的列用逗号(，)分隔。我们将在下一节中向您展示如何更详细地列(字段)定义。</li>
<li>第三，需要为engine子句中的表指定存储引擎。可以使用任何存储引擎，如：InnoDB，MyISAM，HEAP，EXAMPLE，CSV，ARCHIVE，MERGE， FEDERATED或NDBCLUSTER。如果不明确声明存储引擎，MySQL将默认使用InnoDB。</li>
</ul>
<p><strong>查看表的列属性</strong></p>
<pre><code>1. show columns from user;

2. desc user;
</code></pre><p><strong>ALTER TABLE语句来设置列的自动递增属性</strong></p>
<pre><code>ALTER TABLE tasks
CHANGE COLUMN task_id task_id INT(11) NOT NULL AUTO_INCREMENT;
</code></pre><p><strong>添加新列</strong></p>
<pre><code>ALTER TABLE vendors
ADD COLUMN phone VARCHAR(15) AFTER name;

ALTER TABLE tasks
ADD COLUMN complete DECIMAL(2,1) NULL
AFTER description;
</code></pre><p><strong>修改列的属性</strong></p>
<pre><code>原来表dictionary的一列enword的属性为VARCHAR(32),修改为VARCHAR(64)  NOT NULL.
ALTER TABLE table_name MODIFY COLUMN column_name VARCHAR(64) NOT NULL;
</code></pre><p><strong>删除列</strong></p>
<pre><code>ALTER TABLE tasks
DROP COLUMN description;
</code></pre><p><strong>重命名表</strong></p>
<pre><code>ALTER TABLE tasks
RENAME TO work_items;

2. RENAME TABLE old_table_name TO new_table_name;
</code></pre><hr>
<p><strong>插入数据</strong></p>
<pre><code>INSERT INTO tasks(subject,start_date,end_date,description) //插入到tasks表中
VALUES('Learn MySQL INSERT','2017-07-21','2017-07-22','Start learning..');
</code></pre><p><strong>插入多行</strong></p>
<pre><code>INSERT INTO table(column1,column2...)
VALUES (value1,value2,...),
       (value1,value2,...),
       (value1, value2,...);
</code></pre><p><strong>插入日期出错</strong></p>
<pre><code>#https://blog.csdn.net/weixin_50518271/article/details/113761164
select @@SQL_MODE
SET @@SQL_MODE = REPLACE(@@SQL_MODE, 'NO_ZERO_DATE', '');
</code></pre><hr>
<p><strong>复制表结构</strong></p>
<pre><code>CREATE TABLE tasks_bak LIKE tasks;

INSERT INTO tasks_bak
SELECT * FROM tasks;
</code></pre><hr>
<p><strong>MySQL INSERT与ON DUPLICATE KEY UPDATE</strong></p>
<pre><code>INSERT INTO tasks(task_id,subject,start_date,end_date,description)
VALUES (4,'Test ON DUPLICATE KEY UPDATE','2017-01-01','2017-01-02','Next Priority')
ON DUPLICATE KEY UPDATE
   task_id = task_id + 1,
   subject = 'Test ON DUPLICATE KEY UPDATE';
</code></pre><p><strong>等同于UPDATE语句</strong></p>
<pre><code>UPDATE tasks
SET
    task_id = task_id + 1,
    subject = 'Test ON DUPLICATE KEY UPDATE'
WHERE
    task_id = 4;
</code></pre><hr>
<p><strong>UPDATE</strong></p>
<pre><code>UPDATE employees
SET
    lastname = 'NKS',
    email = 'mary.new@yiibai.com'
WHERE
    employeeNumber = 1056;
</code></pre><p><strong>随机选择一个职位是Sales Rep的员工</strong></p>
<pre><code>SELECT
    employeeNumber
FROM
    employees
WHERE
    jobtitle = 'Sales Rep'
ORDER BY RAND()
LIMIT 1;
</code></pre><p><strong>需要更新customers表中的销售代表员工编号(employeeNumber)列</strong></p>
<pre><code>UPDATE customers
SET
    salesRepEmployeeNumber = (SELECT
            employeeNumber
        FROM
            employees
        WHERE
            jobtitle = 'Sales Rep'
        LIMIT 1)
WHERE
    salesRepEmployeeNumber IS NULL;
</code></pre><hr>
<p><strong>备份数据库</strong></p>
<p><a href="https://www.yiibai.com/mysql/how-to-backup-database-using-mysqldump.html">https://www.yiibai.com/mysql/how-to-backup-database-using-mysqldump.html</a></p>
<hr>
<p><strong>DELETE</strong></p>
<p><strong>删除表</strong>
<code>DROP TABLE IF EXISTS tasks;</code></p>
<p><strong>删除指定条件</strong></p>
<pre><code>DELETE FROM employees
WHERE
    officeCode = 4;
</code></pre><p><strong>删除表中所有行</strong>
<code>delete from employees;</code></p>
<p><strong>删除指定行数</strong></p>
<pre><code>DELETE FROM customers
ORDER BY customerName
LIMIT 10; //10行
</code></pre><p><strong>删除五个法国客户</strong></p>
<pre><code>DELETE FROM customers
WHERE country = 'France'
ORDER BY creditLimit
LIMIT 5;
</code></pre><hr>
<p><strong>创建函数</strong></p>
<pre><code>DELIMITER //

CREATE PROCEDURE get_employee(IN p_id INT)

begin
 SELECT first_name
 ,last_name
 ,dept_name
 FROM employees
 INNER JOIN departments using (department_id)
 WHERE id = p_id;
END;
//

DELIMITER;
</code></pre><p><strong>运行</strong>
<code>CALL get_employee(1);</code></p>
<hr>
<p><strong>Mysql技巧</strong>
<a href="https://www.yiibai.com/mysql/mysqltips.html">https://www.yiibai.com/mysql/mysqltips.html</a></p>
<p><strong>MySQL存储过程</strong>
<a href="https://www.yiibai.com/mysql/stored-procedure.html">https://www.yiibai.com/mysql/stored-procedure.html</a></p>
<p>Re:</p>
<p><a href="https://www.yiibai.com/mysql">https://www.yiibai.com/mysql</a></p>
<p><a href="https://stackoverflow.com/questions/3401982/error-with-mysql-procedures-error-1304-error-1305">https://stackoverflow.com/questions/3401982/error-with-mysql-procedures-error-1304-error-1305</a></p>
<p><a href="https://blog.csdn.net/yuxin6866/article/details/52722913">https://blog.csdn.net/yuxin6866/article/details/52722913</a></p>

    </div>
    <div class="post-footer">
      
    </div>
  </article>
<br />
<hr width = "450" color="#eeeeee" align="left">
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="/vcvc/license.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
<br />
<br />
<hr width = "450" color="#eeeeee" align="left">
</div>
  
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script>
    const gitalk = new Gitalk({
        clientID: '21b0d923081673c4c523',
        clientSecret: 'f3b067b311054eeea1dc23fed945221e8585372f',
        repo: '6923403.github.io',
        owner: '6923403',
        admin: ['6923403'],
        id: location.pathname, 
        distractionFreeMode: false 
    });
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
            return;
        }
        gitalk.render('gitalk-container');
    })();
</script>

  <div>

    </main>
  </body>
</html>
